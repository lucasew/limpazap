[tools]
android-sdk = "19.0"
flutter = "3.22.2-stable"
java = "22.0.0"
usage = "2.12.0"
yq = "4.50.1"
shfmt = "3.12.0"
shellcheck = "0.11.0"
actionlint = "1.7.10"
dprint = "0.51.1"
"npm:prettier" = "3.8.0"

[tasks.setup-androidsdk]
run = "yes | sdkmanager \"platforms;android-29\" \"build-tools;29.0.3\" \"platform-tools\" && yes | flutter doctor --android-licenses"

[tasks."fmt:dart"]
run = "dart format ."
description = "Format Dart files"

[tasks."fmt:sh"]
run = "shfmt -w create_backup"
description = "Format Bash scripts"

[tasks."fmt:md"]
run = "dprint fmt"
description = "Format Markdown files"

[tasks."fmt:yaml"]
run = "prettier --write \"**/*.yaml\""
description = "Format YAML files"

[tasks.fmt]
depends = ["fmt:*"]
description = "Format all files"

[tasks."lint:dart"]
run = "flutter analyze"
description = "Lint Dart files"

[tasks."lint:sh"]
run = "shellcheck create_backup"
description = "Lint Bash scripts"

[tasks."lint:action"]
run = "actionlint"
description = "Lint GitHub Actions"

[tasks.lint]
depends = ["lint:*"]
description = "Lint all files"

[tasks.install]
run = "flutter pub get"
description = "Install dependencies"

[tasks.test]
run = "if [ -d test ]; then flutter test; else echo 'No tests found, skipping'; fi"
description = "Run tests"

[tasks.ci]
depends = ["lint", "test"]
description = "CI pipeline"
